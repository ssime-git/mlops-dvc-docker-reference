schema: '2.0'
stages:
  ingest:
    cmd: "docker run --rm -v /home/seb/project/mlops-dvc-docker-reference/data:/data
      mlops-ingest python ingest.py\n"
    deps:
    - path: stages/ingest/ingest.py
      hash: md5
      md5: 4b379fa80c14b405a0a9f45cc8bd27b4
      size: 984
    outs:
    - path: data/raw/iris.csv
      hash: md5
      md5: 9b81a5b2beab90b5e381dfb33627d536
      size: 4189
  preprocess:
    cmd: "docker run --rm -v /home/seb/project/mlops-dvc-docker-reference/data:/data
      mlops-preprocess python preprocess.py\n"
    deps:
    - path: data/raw/iris.csv
      hash: md5
      md5: 9b81a5b2beab90b5e381dfb33627d536
      size: 4189
    - path: stages/preprocess/preprocess.py
      hash: md5
      md5: 4075bd61582344a3241fa8cd4944755b
      size: 1873
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 12633f6b7b7282fb932761e33b24d21d
      size: 617
    - path: data/processed/train.csv
      hash: md5
      md5: 47fd89ce6c52daa555a94670836c67a2
      size: 2237
  train:
    cmd: "docker run --rm -v /home/seb/project/mlops-dvc-docker-reference/data:/data
      -v /home/seb/project/mlops-dvc-docker-reference/models:/models -e MLFLOW_TRACKING_URI=${MLFLOW_TRACKING_URI}
      -e MLFLOW_TRACKING_USERNAME=${MLFLOW_TRACKING_USERNAME} -e MLFLOW_TRACKING_PASSWORD=${MLFLOW_TRACKING_PASSWORD}
      mlops-train python train.py\n"
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 12633f6b7b7282fb932761e33b24d21d
      size: 617
    - path: data/processed/train.csv
      hash: md5
      md5: 47fd89ce6c52daa555a94670836c67a2
      size: 2237
    - path: stages/train/train.py
      hash: md5
      md5: 45a178225048fa64d76340147df63470
      size: 5914
    params:
      params.yaml:
        train.max_depth: 5
        train.n_estimators: 100
        train.random_state: 42
    outs:
    - path: models/model_metadata.json
      hash: md5
      md5: fb7ba4ce9c7a6d29af6e461f2a35b8cd
      size: 294
  evaluate:
    cmd: "docker run --rm -v /home/seb/project/mlops-dvc-docker-reference/data:/data
      -v /home/seb/project/mlops-dvc-docker-reference/models:/models -v /home/seb/project/mlops-dvc-docker-reference/metrics:/metrics
      -e MLFLOW_TRACKING_URI=${MLFLOW_TRACKING_URI} -e MLFLOW_TRACKING_USERNAME=${MLFLOW_TRACKING_USERNAME}
      -e MLFLOW_TRACKING_PASSWORD=${MLFLOW_TRACKING_PASSWORD} mlops-evaluate python
      evaluate.py\n"
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 12633f6b7b7282fb932761e33b24d21d
      size: 617
    - path: models/model_metadata.json
      hash: md5
      md5: fb7ba4ce9c7a6d29af6e461f2a35b8cd
      size: 294
    - path: stages/evaluate/evaluate.py
      hash: md5
      md5: 4a0a6a3ca25474ba2399b2ae94745f57
      size: 2566
    outs:
    - path: metrics/confusion_matrix.json
      hash: md5
      md5: 54297f8eb6bc045b60c43f35b94ee6d2
      size: 203
    - path: metrics/metrics.json
      hash: md5
      md5: 3424e7d1e3954823a2918290ed086c1a
      size: 137
